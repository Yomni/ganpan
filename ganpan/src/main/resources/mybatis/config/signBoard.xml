<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper

PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"

"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!-- MyBatis에서 namespace는 필수적으로 명시해야 함 -->

 <mapper namespace="signBoard">
   
	<resultMap id="signBoardRM" type="signBoardVO">
		<result property="signBoardName" column="sign_board_name"/>
		<result property="bossMemberVO.nickName" column="boss_nickname"/>
		<result property="creationDate" column="creation_date"/>
	</resultMap>
	
	<resultMap id="InvitationMngRM" type="InvitationMngVO">
		<result property="SignBoardVO.signBoardName" column="sign_board_name"/>
		<result property="signBoardVO.bossMemberVO.nickName" column="boss_nickname"/>
		<result property="workNickName.nickName" column="nickname"/>
		<result property="invitationDate" column="invitation_date"/>
	</resultMap>
	
 	<select id="findSignBoardListByTitle" resultMap="signBoardRM" parameterType="String">
 		SELECT sign_board_name, boss_nickname
		FROM sign_board
		WHERE visibility = 0 and sign_board_name=#{title}
 	</select>
 	
 	<insert id="createNewGanpan" parameterType="map">
 		insert into sign_board(sign_board_name,boss_nickname,visibility,creation_date) 
 		values(#{signBoardName},#{bossNickName},#{visibility},sysdate)
 	</insert>
 	
 	<select id="titleCheck" resultType="int" parameterType="map">
 		select count(*) from sign_board 
 		where sign_board_name=#{signBoardName} and boss_nickname=#{bossNickName}
 	</select>

 	<select id="mySignBoardList" resultMap="signBoardRM">
 		SELECT sign_board_name, boss_nickname
		FROM sign_board
		WHERE boss_nickname = #{value}
 	</select>
 	
 	<select id="myJoinSignBoardList" resultMap="signBoardRM">
 		SELECT sb.sign_board_name, sb.boss_nickname
		FROM sign_board sb, organization o 
		WHERE sb.sign_board_name = o.sign_board_name and sb.boss_nickname = o.boss_nickname and worker_nickname = #{value}
 	</select>
 	
 	<select id="myPublicSignBoardList" resultMap="signBoardRM">
 		SELECT sign_board_name, boss_nickname
		FROM sign_board
		WHERE boss_nickname = #{value} and visibility = 0
 	</select>
 	
 	<select id="myPublicJoinSignBoardList" resultMap="signBoardRM">
 		SELECT sb.sign_board_name, sb.boss_nickname
		FROM sign_board sb, organization o 
		WHERE sb.sign_board_name = o.sign_board_name and sb.boss_nickname = o.boss_nickname and worker_nickname = #{value} and visibility = 0
 	</select>
 	
 	<select id="myPrivateSignBoardList" resultMap="signBoardRM">
 		SELECT sign_board_name, boss_nickname
		FROM sign_board
		WHERE boss_nickname = #{value} and visibility = 1
 	</select>
 	
 	<select id="myPrivateJoinSignBoardList" resultMap="signBoardRM">
 		SELECT sb.sign_board_name, sb.boss_nickname
		FROM sign_board sb, organization o 
		WHERE sb.sign_board_name = o.sign_board_name and sb.boss_nickname = o.boss_nickname and worker_nickname = #{value} and visibility = 1
 	</select>

	<select id="ganpanSetting" resultMap="signBoardRM" parameterType="signBoardVO">
		SELECT sign_board_name, boss_nickname, visibility
		FROM sign_board
		WHERE sign_board_name = #{signBoardName} and boss_nickname = #{bossNickName}
	</select>
 	
 	<select id="showContentList" resultMap="signBoardRM" parameterType="signBoardVO">
 		SELECT  work_no, work_name, worker_nickname, board_no, sign_board_name, boss_nickname
		FROM work
		WHERE boss_nickname=#{bossMemberVO.nickName} and sign_board_name=#{signBoardName}
 	</select>
 	
 	<select id="invitationList" resultMap="InvitationMngRM" parameterType="String">
		SELECT sign_board_name, boss_nickname, nickname, invitation_date
		FROM invitation_management
		WHERE nickname = #{value}
 	</select>
</mapper>







